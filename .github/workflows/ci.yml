name: üì¶ CI/CD Build

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-android:
    name: –°–±–æ—Ä–∫–∞ Android (EAS)
    runs-on: ubuntu-latest
    # –±–µ—Ä—ë–º —Ç–æ–∫–µ–Ω –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –∫–ª–∞–¥—ë–º –≤ env
    env:
      EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}

    steps:
      - name: üõé Checkout repository
        uses: actions/checkout@v3

      - name: ü•á Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: üì¶ Install dependencies
        run: npm ci --legacy-peer-deps

      - name: üöÄ Install EAS CLI
        run: npm install -g eas-cli@latest

      - name: üîß (Optional) Login to Expo (EAS CLI —Å–∞–º –≤–æ–∑—å–º—ë—Ç EXPO_TOKEN)
        # –≠—Ç–æ—Ç —à–∞–≥ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω: EAS CLI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç EXPO_TOKEN
        # run: eas login --token $EXPO_TOKEN

      - name: üì± Build Android (non-interactive)
        run: eas build --platform android --non-interactive
